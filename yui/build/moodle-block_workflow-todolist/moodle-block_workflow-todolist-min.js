YUI.add("moodle-block_workflow-todolist",function(i,o){var t="block-workflow-todotask",e="block-workflow-todoid",s=function(){s.superclass.constructor.apply(this,arguments)};i.extend(s,i.Base,{initializer:function(){i.all("a."+t).each(function(o){o.ancestor("li").on("click",this.toggle,this,o),o.setAttribute("href","#")},this)},toggle:function(s,l){var o;s.halt(),o=new RegExp(e+"-(\\d{1,})"),o={sesskey:M.cfg.sesskey,action:"toggletaskdone",stateid:this.get("stateid"),todoid:l.getAttribute("id").match(o)[1]},i.io(M.cfg.wwwroot+"/blocks/workflow/ajax.php",{method:"POST",data:build_querystring(o),on:{complete:function(o,t){var e;try{if((e=i.JSON.parse(t.responseText)).error)return new M.core.ajaxException(e)}catch(s){new M.core.exception(s)}e.response.iscompleted?l.get("parentNode").addClass("completed"):l.get("parentNode").removeClass("completed")}}})}},{NAME:"blocks_workflow_todolist",ATTRS:{stateid:{value:null}}}),M.blocks_workflow=M.blocks_workflow||{},M.blocks_workflow.init_todolist=function(o){return new s(o)}},"@VERSION@",{requires:["base","node","event"]});